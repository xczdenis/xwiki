# XWiki

[XWiki](https://xwiki.org/) - это база знаний.

## Запуск

В Windows все команды выполняются в GitBash!

Создать файл `.env`:
```shell
cp .env.template .env
```

Справка по всем командам:
```shell
./make.sh --help
```

Запустить:
```shell
./make.sh run
```

Остановить:
```shell
./make.sh down
```

## Бекапы и восстановление

Чтобы создать бекапы выполните:
```shell
./make.sh backup
```

Чтобы восстановить докер-тома из бекапов, тома должны существовать. Если сервис еще ни разу не запускался, то томов создано не будет и при выполнении операции восстановления будет ошибка. Поэтому перед выполнением операции восстановления из бекапов, нужно как минимум 1 раз запустить сервис и сразу остановить его:
```shell
./make.sh run
./make.sh down
```

После этого тома будут созданы.

Для восстановления томов из бекапов нужно скопировать нужные бекапы:
1. Данные xwiki: скопировать нужный бекап из папки `backup/xwiki-web` и поместить его в файл `backup/xwiki.tar.gz`
2. Данные postgres: скопировать нужный бекап из папки `backup/xwiki-db` и поместить его в файл `backup/pg.tar.gz`

Выполнить:
```shell
./make.sh restore
```